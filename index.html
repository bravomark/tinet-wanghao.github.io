<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Cache-control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Cache" content="no-cache">

  <title>Document</title>
  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
  <script>
    Date.prototype.Format = function (fmt) {  
        var o = {  
            "M+": this.getMonth() + 1, //月份   
            "d+": this.getDate(), //日   
            "H+": this.getHours(), //小时   
            "m+": this.getMinutes(), //分   
            "s+": this.getSeconds(), //秒   
            "q+": Math.floor((this.getMonth() + 3) / 3), //季度   
            "S": this.getMilliseconds() //毫秒   
        };  
        if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));  
        for (var k in o)  
        if (new RegExp("(" + k + ")").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));  
        return fmt;  
    }
  </script>
  <!--
  <script>
    // 通知 
    function msg(msg) {
      // $.ajaxSettings.async = false
      // $.get('https://api.day.app/gzwpgQyDXNsfdAQRC7dwh/' + msg)
      navigator.sendBeacon('https://api.day.app/gzwpgQyDXNsfdAQRC7dwh/' + msg)
    }

    // 注册onload
    if (window.onload) {
      window.onload = () => msg('onload')
    } else if (window.addEventListener) {
      window.addEventListener('load', () => msg('onload'))
    } else if (window.attachEvent) {
      window.attachEvent('load', () => msg('onload'))
    }
    // 注册onunload
    if (window.onunload) {
      window.onunload = () => msg('onunload')
    } else if (window.addEventListener) {
      window.addEventListener('unload', () => msg('onunload'))
    } else if (window.attachEvent) {
      window.attachEvent('unload', () => msg('onunload'))
    }
    // 注册onbeforeunload
    if (window.onbeforeunload) {
      window.onbeforeunload = () => msg('onbeforeunload')
    } else if (window.addEventListener) {
      window.addEventListener('beforeunload', () => msg('onbeforeunload'))
    } else if (window.attachEvent) {
      window.attachEvent('beforeunload', () => msg('onbeforeunload'))
    }
    // 注册onpageshow
    if (window.onpageshow) {
      window.onpageshow = () => msg('onpageshow')
    } else if (window.addEventListener) {
      window.addEventListener('pageshow', () => msg('onpageshow'))
    } else if (window.attachEvent) {
      window.attachEvent('pageshow', () => msg('onpageshow'))
    }
    // 注册onpagehide
    if (window.onpagehide) {
      window.onpagehide = () => msg('onpagehide')
    } else if (window.addEventListener) {
      window.addEventListener('pagehide', () => msg('onpagehide'))
    } else if (window.attachEvent) {
      window.attachEvent('pagehide', () => msg('onpagehide'))
    }
  </script>
  <script>
    function demo1_video() {
      try {
        alert('navigator：' + navigator);
        alert('navigator.mediaDevices：' + navigator.mediaDevices);
        alert('navigator.mediaDevices.getUserMedia：' + navigator.mediaDevices.getUserMedia);
        alert('navigator.getUserMedia：' + navigator.getUserMedia);
        alert('navigator.webkitGetUserMedia：' + navigator.webkitGetUserMedia);
        alert('navigator.mozGetUserMedia：' + navigator.mozGetUserMedia);

        if (navigator.mediaDevices.getUserMedia || navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia) {
          alert('获取audio');
          this.getUserMedia({ video: false, audio: true });
        }
      } catch (e) {
        alert('异常:' + e)
      }
    }

    function demo1_audio() {
      try {
        alert('navigator：' + navigator);
        alert('navigator.mediaDevices：' + navigator.mediaDevices);
        alert('navigator.mediaDevices.getUserMedia：' + navigator.mediaDevices.getUserMedia);
        alert('navigator.getUserMedia：' + navigator.getUserMedia);
        alert('navigator.webkitGetUserMedia：' + navigator.webkitGetUserMedia);
        alert('navigator.mozGetUserMedia：' + navigator.mozGetUserMedia);

        if (navigator.mediaDevices.getUserMedia || navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia) {
          alert('获取video');
          this.getUserMedia({ video: true, audio: false });
        }
      } catch (e) {
        alert('异常' + e)
      }
    }

    function getUserMedia(constrains) {
      let that = this;
      if (navigator.mediaDevices.getUserMedia) {
        // 最新标准API
        navigator.mediaDevices.getUserMedia(constrains).then(stream => { that.success(stream); }).catch(err => { that.error(err); });
      } else if (navigator.webkitGetUserMedia) {
        // webkit内核浏览器
        navigator.webkitGetUserMedia(constrains).then(stream => { that.success(stream); }).catch(err => { that.error(err); });
      } else if (navigator.mozGetUserMedia) {
        // Firefox浏览器
        navigator.mozGetUserMedia(constrains).then(stream => { that.success(stream); }).catch(err => { that.error(err); });
      } else if (navigator.getUserMedia) {
        // 旧版API
        navigator.getUserMedia(constrains).then(stream => { that.success(stream); }).catch(err => { that.error(err); });
      }
    }
    // 成功的回调函数
    function success(stream) {
      alert("已点击允许,开启成功");
    }
    // 异常的回调函数
    function error(error) {
      alert("访问用户媒体设备失败：", error.name, error.message);
    }
    
    function createA(url) {
      const eleLink = document.createElement("a")
      eleLink.style.display = "none"
      eleLink.href = url
      // 触发点击
      document.body.appendChild(eleLink)
      eleLink.click()
      // 然后移除
      document.body.removeChild(eleLink)
    }
    
    function createA2(url) {
      const eleLink = document.createElement("a")
      eleLink.style.display = "none"
      eleLink.href = url
      eleLink.target = '_blank'
      // 触发点击
      document.body.appendChild(eleLink)
      eleLink.click()
      // 然后移除
      document.body.removeChild(eleLink)
    }
    
    /**
     * 发送通知
     */
    function notice(msg) {
      $.ajax({url: "https://api.day.app/gzwpgQyDXNsfdAQRC7dwh/" + msg, async: false, success:function(result){

      }})
    }
    
    /**
     * 定时通知
     */
    function timer_notice() {
      setInterval(function() {
        notice('通知：' + new Date().Format("yyyy-MM-dd HH:mm:ss"))
      }, 10 * 1000)
    }
    // timer_notice()
  </script>
  -->
</head>
<body>
  版本：2022/01/13 19:05
  <br>
  <button onclick="demo1_video()">Demo1_Video</button>
  <br/>
  <button onclick="demo1_audio()">Demo1_Audio</button>
  <br/>
  <a href="https://codeload.github.com/floadyun/DownloadSpeed/zip/refs/heads/master" target="_blank">测试下载文件</a>
  <br/>
  <button onclick="createA('https://codeload.github.com/floadyun/DownloadSpeed/zip/refs/heads/master')">测试下载文件</button>
  <br/>
  <button onclick="createA2('https://codeload.github.com/floadyun/DownloadSpeed/zip/refs/heads/master')">测试下载文件2</button>
  <br/>
  <button onclick="notice()">测试通知</button>
  
  <video
         controls
         width="400px"
         height="200px"
         style="object-fit:fill"
         webkit-playsinline="true"
         x-webkit-airplay="true"
         playsinline="true"
         x5-video-player-type="h5"
         x5-video-orientation="h5"
         x5-video-player-fullscreen="true"
         preload="auto"
         poster="https://scrm.ti-scrm.com/img/login-new-image1.bde9158e.png"
         >
    <source src="http://qiniu.yongdainfo.com/tmp/wx46f79b586bab421a.o6zAJs9HeceHc3RoWfJTR7_rGuXE.u0mPYVOmtV1w2e23b1ffc976d5eaf2b4f23c1f45c98e.mp4" type="video/mp4">
  </video>
</body>
</html>
